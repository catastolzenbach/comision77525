<h2>üì¶ {{product.title}}</h2>

<div style="display: grid; grid-template-columns: 1fr 1fr; gap: 30px; margin-top: 20px;">
  <div>
    <div class="product-card" style="margin: 0;">
      <div class="product-title">{{product.title}}</div>
      <div class="product-description">{{product.description}}</div>
      <div class="product-price" style="font-size: 1.5em;">${{product.price}}</div>
      <div class="product-stock">Stock: {{product.stock}}</div>
      <div class="product-category">{{product.category}}</div>
      <div style="margin-top: 10px;">
        <small>C√≥digo: {{product.code}}</small>
      </div>
      <div style="margin-top: 15px;">
        <button class="btn btn-success" onclick="addToCart('{{product._id}}')">üõí Agregar al Carrito</button>
      </div>
    </div>
  </div>
  
  <div>
    <h3>Informaci√≥n del Producto</h3>
    <div style="background: #f8f9fa; padding: 20px; border-radius: 8px;">
      <p><strong>Estado:</strong> {{#if product.status}}‚úÖ Disponible{{else}}‚ùå No disponible{{/if}}</p>
      <p><strong>Categor√≠a:</strong> {{product.category}}</p>
      <p><strong>C√≥digo:</strong> {{product.code}}</p>
      <p><strong>Precio:</strong> ${{product.price}}</p>
      <p><strong>Stock:</strong> {{product.stock}} unidades</p>
      {{#if product.thumbnails.length}}
        <p><strong>Im√°genes:</strong></p>
        <ul>
          {{#each product.thumbnails}}
            <li>{{this}}</li>
          {{/each}}
        </ul>
      {{/if}}
    </div>
    
    <div style="margin-top: 20px;">
      <a href="/products" class="btn">‚¨ÖÔ∏è Volver a Productos</a>
    </div>
  </div>
</div>

<script>
  function addToCart(productId) {
    fetch('/api/carts', {
      method: 'POST'
    })
    .then(response => response.json())
    .then(data => {
      if (data.status === 'success') {
        const cartId = data.data._id;
        return fetch(`/api/carts/${cartId}/product/${productId}`, {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json'
          },
          body: JSON.stringify({ quantity: 1 })
        });
      }
    })
    .then(response => response.json())
    .then(data => {
      if (data.status === 'success') {
        alert('Producto agregado al carrito exitosamente');
      } else {
        alert('Error al agregar el producto al carrito');
      }
    })
    .catch(error => {
      console.error('Error:', error);
      alert('Error al agregar el producto al carrito');
    });
  }
</script>
